<ng-container *ngIf="!isLoggedIn; else mainAppLayout">
  <router-outlet></router-outlet>
</ng-container>

<ng-template #mainAppLayout>
  <mat-sidenav-container class="app-container">
    <mat-sidenav #sidenav
                 [mode]="isMobile ? 'over' : 'side'"
                 [opened]="!isMobile"
                 class="app-sidenav">
      <div class="sidenav-header">
        <h1 class="app-title">iDocs</h1>
      </div>
      <mat-nav-list>
        <a mat-list-item (click)="navigateTo('/dashboard')">
          <mat-icon matListItemIcon>dashboard</mat-icon>
          Dashboard
        </a>
        <a mat-list-item (click)="navigateTo('/files')">
          <mat-icon matListItemIcon>folder</mat-icon>
          Files
        </a>
        <a mat-list-item (click)="navigateTo('/search')">
          <mat-icon matListItemIcon>search</mat-icon>
          Search
        </a>
        <a mat-list-item (click)="navigateTo('/chat')">
          <mat-icon matListItemIcon>chat</mat-icon>
          AI Chat
        </a>
        <a mat-list-item (click)="navigateTo('/settings')">
          <mat-icon matListItemIcon>settings</mat-icon>
          Settings
        </a>
      </mat-nav-list>
      <div class="sidenav-footer">
        <button mat-stroked-button color="accent" (click)="logout()" class="logout-button">
          <mat-icon>exit_to_app</mat-icon>
          Logout
        </button>
      </div>
    </mat-sidenav>

    <mat-sidenav-content class="app-content">
      <mat-toolbar color="primary" class="app-toolbar" *ngIf="isMobile">
        <button mat-icon-button (click)="sidenav.toggle()">
          <mat-icon>menu</mat-icon>
        </button>
        <span>iDocs</span>
      </mat-toolbar>
      <div class="page-content">
        <router-outlet></router-outlet>
      </div>
    </mat-sidenav-content>
  </mat-sidenav-container>

  <mat-toolbar color="primary" class="bottom-nav-mobile" *ngIf="isLoggedIn && isMobile">
    <a mat-icon-button (click)="navigateTo('/dashboard')" matTooltip="Dashboard">
      <mat-icon>dashboard</mat-icon>
    </a>
    <a mat-icon-button (click)="navigateTo('/files')" matTooltip="Files">
      <mat-icon>folder</mat-icon>
    </a>
    <a mat-icon-button (click)="navigateTo('/search')" matTooltip="Search">
      <mat-icon>search</mat-icon>
    </a>
    <a mat-icon-button (click)="navigateTo('/chat')" matTooltip="AI Chat">
      <mat-icon>chat</mat-icon>
    </a>
    <a mat-icon-button (click)="navigateTo('/settings')" matTooltip="Settings">
      <mat-icon>settings</mat-icon>
    </a>
  </mat-toolbar>
</ng-template>
